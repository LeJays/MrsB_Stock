<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard MRSB - Luxe Edition</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="admin-bg">

    <header class="main-header">
        <div class="logo-container">
            <img src="IMG_1959.jpg" alt="Mrs.B Logo" class="brand-logo">
            <p class="slogan">SOYEZ VOTRE STANDARD DE BEAUTÉ</p>
        </div>
        
        <nav class="top-nav">
            <a href="#" class="nav-item active" onclick="showSection('stats')">Tableau de bord</a>
            <a href="#" class="nav-item" onclick="showSection('stock')">État Stock</a>
            <a href="#" class="nav-item" onclick="showSection('entrees')">Entrées</a>
            <a href="#" class="nav-item" onclick="showSection('sorties')">Sorties</a>
            <a href="#" class="nav-item" onclick="showSection('finance')">Analyse Finance</a>
            <a href="#" class="nav-item" onclick="showSection('categories')">Catégories</a>
        </nav>

        <div class="user-badge">
            <button id="logoutBtn" class="btn-gold-outline">Déconnexion</button>
        </div>
    </header>

    <main class="dashboard-container">
        
        <section id="statsSection" class="content-section">
            <h2 class="section-title gold-text">Aperçu Général</h2>
            <div class="stats-grid">
                <div class="stat-card"><span>Investi (Achats)</span><div class="card-value" id="totalEntreesStat">0</div></div>
                <div class="stat-card"><span>Chiffre d'Affaires</span><div class="card-value" id="totalSortiesStat">0</div></div>
                <div class="stat-card highlight"><span>Bénéfice Net</span><div class="card-value" id="beneficeNetStat">0</div></div>
            </div>
            <div class="admin-panel" style="margin-top: 20px; padding: 20px;">
                <h3 class="gold-text">Performance (Ventes vs Dépenses)</h3>
                <canvas id="beneficeChart" style="max-height: 300px;"></canvas>
            </div>
        </section>

        <section id="stockSection" class="content-section" style="display:none;">
            <h2 class="section-title gold-text">Suivi des Quantités</h2>
            <div class="admin-panel">
                <div class="table-box full-width">
                    <table>
                        <thead>
                            <tr><th>Catégorie</th><th>Total Reçu</th><th>Total Vendu</th><th>En Stock</th><th>Statut</th></tr>
                        </thead>
                        <tbody id="listStockTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="financeSection" class="content-section" style="display:none;">
            <h2 class="section-title gold-text">Analyse de la Trésorerie</h2>
            <div class="stats-grid">
                <div class="stat-card"><span>Ventes Totales</span><div class="card-value" id="finVentes">0</div></div>
                <div class="stat-card highlight"><span>Bénéfice</span><div class="card-value" id="finBenefice">0</div></div>
                <div class="stat-card"><span>Panier Moyen</span><div class="card-value" id="finPanierMoyen">0</div></div>
            </div>

            <div class="admin-panel" style="margin-top:20px;">
                <h3 class="gold-text">Répartition des Encaissements</h3>
                <div style="display: flex; justify-content: space-around; padding: 20px; background: #222; border-radius: 8px;">
                    <div><p class="grey-text">Espèces (Cash)</p><h4 id="statsCash" style="color:white">0</h4></div>
                    <div style="border-left: 1px solid #444; padding-left: 20px;"><p style="color:#FF6600">Orange Money</p><h4 id="statsOM" style="color:white">0</h4></div>
                    <div style="border-left: 1px solid #444; padding-left: 20px;"><p style="color:#FFCC00">MTN MoMo</p><h4 id="statsMomo" style="color:white">0</h4></div>
                </div>
            </div>

            <div class="admin-panel" style="margin-top:20px; border-left: 4px solid #ff4444;">
                <h3 style="color:#ff4444">Total Investissement</h3>
                <p id="finDepenses" style="font-size: 24px; font-weight: bold;">0</p>
                <span class="grey-text">Ceci correspond au capital immobilisé.</span>
            </div>
        </section>

        <section id="sortiesSection" class="content-section" style="display:none;">
            <h2 class="section-title gold-text">Nouvelle Vente</h2>
            <div class="admin-panel">
                <form id="formSortie" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                    <input type="text" id="sortieClient" class="input-gold" placeholder="Client" required>
                    <select id="sortieCat" class="input-gold" required></select>
                    <input type="text" id="sortieProduitNom" class="input-gold" placeholder="Produit" required>
                    <input type="number" id="sortieQty" class="input-gold" value="1" min="1" required>
                    <input type="number" id="sortiePrix" class="input-gold" placeholder="Prix Total" required>
                    <select id="sortiePaiement" class="input-gold">
                        <option value="Cash">Cash</option>
                        <option value="Orange Money">Orange Money</option>
                        <option value="MTN MoMo">MTN MoMo</option>
                    </select>
                    <button type="submit" class="btn-gold" style="grid-column: span 3; height: 45px;">Valider la Transaction</button>
                </form>
                <div class="table-box full-width" style="margin-top:20px;">
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Vendeur</th><th>Client</th><th>Article</th><th>Qté</th><th>Total</th><th>Paiement</th><th>Action</th></tr>
                        </thead>
                        <tbody id="listSortiesTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="entreesSection" class="content-section" style="display:none;">
            <h2 class="section-title gold-text">Approvisionnement</h2>
            <div class="admin-panel">
                <form id="formEntree" style="display: flex; gap: 10px;">
                    <select id="entreeCat" class="input-gold" required></select>
                    <input type="number" id="entreeQty" class="input-gold" placeholder="Qté" required>
                    <input type="number" id="entreeMontant" class="input-gold" placeholder="Coût Achat" required>
                    <button type="submit" class="btn-gold" style="height:45px">Ajouter</button>
                </form>
                <div class="table-box full-width">
                    <table>
                        <thead><tr><th>Date</th><th>Catégorie</th><th>Qté</th><th>Achat</th></tr></thead>
                        <tbody id="listEntreesTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="categoriesSection" class="content-section" style="display:none;">
            <h2 class="section-title gold-text">Gestion des Catégories</h2>
            <div class="admin-panel">
                <form id="formCat">
                    <input type="text" id="catNom" class="input-gold" placeholder="Nom de catégorie" required>
                    <textarea id="catDesc" class="input-gold" placeholder="Description"></textarea>
                    <button type="submit" class="btn-gold">Créer</button>
                </form>
                <div class="table-box full-width" style="margin-top:15px;">
                    <table>
                        <thead><tr><th>Nom</th><th>Description</th></tr></thead>
                        <tbody id="listCategoriesTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <script type="module" src="admin-logic.js"></script>
</body>
</html>